<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>8086汇编   在屏幕上显现动态菱形图案 | SuCicada</title>
<meta name="keywords" content="assmbly">
<meta name="description" content=" 在屏幕上显现动态菱形图案。
* * * * * * * * * * *	* * * * * * * * * * * * * * * * * * * * * * * * &lt;图一&gt; &lt;图二&gt; &lt;图三&gt; &lt;图四&gt; &lt;图五&gt; 思路示例：
&lt;1&gt;编写程序p1:
显示一个字符
&lt;2&gt;把程序p1做成子程序，调用子程序编写程序p2:
显示一个菱形&lt;图三&gt;
&lt;3&gt;把p2做成一个子程序，调用子程序编写程序p3:
循环显示出如图五种图形
&lt;4&gt;修改程序p2,实现动态效果:
添加清屏子程序和延时子程序,完成完整程序。
注意点：
要求以统一逻辑实现全部的五个图形。
第三层的公式见代码
assume cs:code code segment start: ; [ input: al: row ] ; [ ah: column ] mov cx,10 start_s: mov di,0 mov si,1 call p3 mov di,4 mov si,-1 call p3 loop start_s mov ax,4c00h int 21h p3: ; -- input: di (index of p2) si (1 or -1) push ax push bx push cx push dx push di ; mov cx,5 ; times ; cmp di,3 ; jne p3_di_not_4 ; p3_di_not_4: mov cx,4 ; times ; mov di,0 p3_s: push cx mov cx,di mov dl,&#39;*&#39; call p2 pop cx ; bx ax lay time mov ax,0 mov bx,1 push cx p3_layout: sub ax,1 sbb bx,0 mov cx,ax or cx,bx cmp cx,0 jne p3_layout pop cx push cx mov cx,di mov dl,&#39; &#39; call p2 pop cx add di,si loop p3_s pop di pop dx pop cx pop bx pop ax ret p2: push ax push bx push cx ; ----- [1] ----------- mov al,10 mov ah,10 mov bl,al mov bh,ah call p1 add bl,1 ; ----- [2] ----------- push cx cmp cx,0 je p2_2_cx_is_0 sub cx,1 p2_2_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [3] ----------- ; left:ah = bh-1-(1&#43;1&#43;(cl-2))*(cl-1)/2 ; = bh-1-cl*(cl-1)/2 = bh-segdis ; right: bh&#43;1&#43;cl*(cl-1)/2 = bh&#43;segdis ; segdis = 1&#43;cl*(cl-1)/2 push cx cmp cx,0 je p2_3_cx_is_0 mov al,cl ; cl sub cl,1 ; cl-1 mul cl ; cl*(cl-1) -&gt; ax mov cl,2 ; 2 div cl ; cl*(cl-1)/2 -&gt; al add al,1 ; cl*(cl-1)/2&#43;1 mov cl,al ; segdis p2_3_cx_is_0: mov al,bl mov ah,bh sub ah,cl ; bh - segdis call p1 mov ah,bh add ah,cl ; bh &#43; segdis call p1 pop cx add bl,1 ; ----- [4] ----------- push cx cmp cx,0 je p2_4_cx_is_0 sub cx,1 p2_4_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [5] ----------- mov al,bl mov ah,bh call p1 pop cx pop bx pop ax ret p1: ; ----- input: al: row ah: column dl:char push ax push bx push es mov bx,0b800h mov es,bx mov bl,ah mov bh,al mov al,160 mul bh add bl,bl mov bh,0 add ax,bx mov bx,ax mov byte ptr es:[bx],dl mov byte ptr es:[bx&#43;1],2 pop es pop bx pop ax ret code ends end start ; -------*------- 7 ; -------*------- 7 7 ; -------*------- 7 7 ; -------*------- ; -------*------- ; -------*------- 7 ; -------*------- 7 7 ; ------*-*------ 6 8 ; -------*------- ; -------*------- ; 7-1-(1&#43;1&#43;(n-2))*(n-1)/2 ; 2 ; -------*------- 7 ; ------*-*------ 6 8 ; -----*---*----- 5 9 ; ------*-*------ ; -------*------- ; 3 ; -------*------- 7 ; -----*---*----- 5 9 ; ---*-------*--- 3 11 ; -----*---*----- ; -------*------- ; -------*------- 7 ; ----*-----*---- 4 10 ; *-------------* 0 14 ; ----*-----*---- ; -------*------- ">
<meta name="author" content="SuCicada">
<link rel="canonical" href="https://sucicada.github.io/blog/posts/assmbly/8086%E6%B1%87%E7%BC%96-%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E6%98%BE%E7%8E%B0%E5%8A%A8%E6%80%81%E8%8F%B1%E5%BD%A2%E5%9B%BE%E6%A1%88/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.5b5501da54f21435c8f8010d1de02123ae8d1ada696b48c6530ec4eea283e7d6.css" integrity="sha256-W1UB2lTyFDXI&#43;AENHeAhI66NGtppa0jGUw7E7qKD59Y=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://sucicada.github.io/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sucicada.github.io/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sucicada.github.io/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sucicada.github.io/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://sucicada.github.io/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="8086汇编   在屏幕上显现动态菱形图案" />
<meta property="og:description" content=" 在屏幕上显现动态菱形图案。
* * * * * * * * * * *	* * * * * * * * * * * * * * * * * * * * * * * * &lt;图一&gt; &lt;图二&gt; &lt;图三&gt; &lt;图四&gt; &lt;图五&gt; 思路示例：
&lt;1&gt;编写程序p1:
显示一个字符
&lt;2&gt;把程序p1做成子程序，调用子程序编写程序p2:
显示一个菱形&lt;图三&gt;
&lt;3&gt;把p2做成一个子程序，调用子程序编写程序p3:
循环显示出如图五种图形
&lt;4&gt;修改程序p2,实现动态效果:
添加清屏子程序和延时子程序,完成完整程序。
注意点：
要求以统一逻辑实现全部的五个图形。
第三层的公式见代码
assume cs:code code segment start: ; [ input: al: row ] ; [ ah: column ] mov cx,10 start_s: mov di,0 mov si,1 call p3 mov di,4 mov si,-1 call p3 loop start_s mov ax,4c00h int 21h p3: ; -- input: di (index of p2) si (1 or -1) push ax push bx push cx push dx push di ; mov cx,5 ; times ; cmp di,3 ; jne p3_di_not_4 ; p3_di_not_4: mov cx,4 ; times ; mov di,0 p3_s: push cx mov cx,di mov dl,&#39;*&#39; call p2 pop cx ; bx ax lay time mov ax,0 mov bx,1 push cx p3_layout: sub ax,1 sbb bx,0 mov cx,ax or cx,bx cmp cx,0 jne p3_layout pop cx push cx mov cx,di mov dl,&#39; &#39; call p2 pop cx add di,si loop p3_s pop di pop dx pop cx pop bx pop ax ret p2: push ax push bx push cx ; ----- [1] ----------- mov al,10 mov ah,10 mov bl,al mov bh,ah call p1 add bl,1 ; ----- [2] ----------- push cx cmp cx,0 je p2_2_cx_is_0 sub cx,1 p2_2_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [3] ----------- ; left:ah = bh-1-(1&#43;1&#43;(cl-2))*(cl-1)/2 ; = bh-1-cl*(cl-1)/2 = bh-segdis ; right: bh&#43;1&#43;cl*(cl-1)/2 = bh&#43;segdis ; segdis = 1&#43;cl*(cl-1)/2 push cx cmp cx,0 je p2_3_cx_is_0 mov al,cl ; cl sub cl,1 ; cl-1 mul cl ; cl*(cl-1) -&gt; ax mov cl,2 ; 2 div cl ; cl*(cl-1)/2 -&gt; al add al,1 ; cl*(cl-1)/2&#43;1 mov cl,al ; segdis p2_3_cx_is_0: mov al,bl mov ah,bh sub ah,cl ; bh - segdis call p1 mov ah,bh add ah,cl ; bh &#43; segdis call p1 pop cx add bl,1 ; ----- [4] ----------- push cx cmp cx,0 je p2_4_cx_is_0 sub cx,1 p2_4_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [5] ----------- mov al,bl mov ah,bh call p1 pop cx pop bx pop ax ret p1: ; ----- input: al: row ah: column dl:char push ax push bx push es mov bx,0b800h mov es,bx mov bl,ah mov bh,al mov al,160 mul bh add bl,bl mov bh,0 add ax,bx mov bx,ax mov byte ptr es:[bx],dl mov byte ptr es:[bx&#43;1],2 pop es pop bx pop ax ret code ends end start ; -------*------- 7 ; -------*------- 7 7 ; -------*------- 7 7 ; -------*------- ; -------*------- ; -------*------- 7 ; -------*------- 7 7 ; ------*-*------ 6 8 ; -------*------- ; -------*------- ; 7-1-(1&#43;1&#43;(n-2))*(n-1)/2 ; 2 ; -------*------- 7 ; ------*-*------ 6 8 ; -----*---*----- 5 9 ; ------*-*------ ; -------*------- ; 3 ; -------*------- 7 ; -----*---*----- 5 9 ; ---*-------*--- 3 11 ; -----*---*----- ; -------*------- ; -------*------- 7 ; ----*-----*---- 4 10 ; *-------------* 0 14 ; ----*-----*---- ; -------*------- " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sucicada.github.io/blog/posts/assmbly/8086%E6%B1%87%E7%BC%96-%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E6%98%BE%E7%8E%B0%E5%8A%A8%E6%80%81%E8%8F%B1%E5%BD%A2%E5%9B%BE%E6%A1%88/" /><meta property="og:image" content="https://sucicada.github.io/blog/papermod-cover.png"/><meta property="article:section" content="posts" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://sucicada.github.io/blog/papermod-cover.png"/>

<meta name="twitter:title" content="8086汇编   在屏幕上显现动态菱形图案"/>
<meta name="twitter:description" content=" 在屏幕上显现动态菱形图案。
* * * * * * * * * * *	* * * * * * * * * * * * * * * * * * * * * * * * &lt;图一&gt; &lt;图二&gt; &lt;图三&gt; &lt;图四&gt; &lt;图五&gt; 思路示例：
&lt;1&gt;编写程序p1:
显示一个字符
&lt;2&gt;把程序p1做成子程序，调用子程序编写程序p2:
显示一个菱形&lt;图三&gt;
&lt;3&gt;把p2做成一个子程序，调用子程序编写程序p3:
循环显示出如图五种图形
&lt;4&gt;修改程序p2,实现动态效果:
添加清屏子程序和延时子程序,完成完整程序。
注意点：
要求以统一逻辑实现全部的五个图形。
第三层的公式见代码
assume cs:code code segment start: ; [ input: al: row ] ; [ ah: column ] mov cx,10 start_s: mov di,0 mov si,1 call p3 mov di,4 mov si,-1 call p3 loop start_s mov ax,4c00h int 21h p3: ; -- input: di (index of p2) si (1 or -1) push ax push bx push cx push dx push di ; mov cx,5 ; times ; cmp di,3 ; jne p3_di_not_4 ; p3_di_not_4: mov cx,4 ; times ; mov di,0 p3_s: push cx mov cx,di mov dl,&#39;*&#39; call p2 pop cx ; bx ax lay time mov ax,0 mov bx,1 push cx p3_layout: sub ax,1 sbb bx,0 mov cx,ax or cx,bx cmp cx,0 jne p3_layout pop cx push cx mov cx,di mov dl,&#39; &#39; call p2 pop cx add di,si loop p3_s pop di pop dx pop cx pop bx pop ax ret p2: push ax push bx push cx ; ----- [1] ----------- mov al,10 mov ah,10 mov bl,al mov bh,ah call p1 add bl,1 ; ----- [2] ----------- push cx cmp cx,0 je p2_2_cx_is_0 sub cx,1 p2_2_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [3] ----------- ; left:ah = bh-1-(1&#43;1&#43;(cl-2))*(cl-1)/2 ; = bh-1-cl*(cl-1)/2 = bh-segdis ; right: bh&#43;1&#43;cl*(cl-1)/2 = bh&#43;segdis ; segdis = 1&#43;cl*(cl-1)/2 push cx cmp cx,0 je p2_3_cx_is_0 mov al,cl ; cl sub cl,1 ; cl-1 mul cl ; cl*(cl-1) -&gt; ax mov cl,2 ; 2 div cl ; cl*(cl-1)/2 -&gt; al add al,1 ; cl*(cl-1)/2&#43;1 mov cl,al ; segdis p2_3_cx_is_0: mov al,bl mov ah,bh sub ah,cl ; bh - segdis call p1 mov ah,bh add ah,cl ; bh &#43; segdis call p1 pop cx add bl,1 ; ----- [4] ----------- push cx cmp cx,0 je p2_4_cx_is_0 sub cx,1 p2_4_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [5] ----------- mov al,bl mov ah,bh call p1 pop cx pop bx pop ax ret p1: ; ----- input: al: row ah: column dl:char push ax push bx push es mov bx,0b800h mov es,bx mov bl,ah mov bh,al mov al,160 mul bh add bl,bl mov bh,0 add ax,bx mov bx,ax mov byte ptr es:[bx],dl mov byte ptr es:[bx&#43;1],2 pop es pop bx pop ax ret code ends end start ; -------*------- 7 ; -------*------- 7 7 ; -------*------- 7 7 ; -------*------- ; -------*------- ; -------*------- 7 ; -------*------- 7 7 ; ------*-*------ 6 8 ; -------*------- ; -------*------- ; 7-1-(1&#43;1&#43;(n-2))*(n-1)/2 ; 2 ; -------*------- 7 ; ------*-*------ 6 8 ; -----*---*----- 5 9 ; ------*-*------ ; -------*------- ; 3 ; -------*------- 7 ; -----*---*----- 5 9 ; ---*-------*--- 3 11 ; -----*---*----- ; -------*------- ; -------*------- 7 ; ----*-----*---- 4 10 ; *-------------* 0 14 ; ----*-----*---- ; -------*------- "/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://sucicada.github.io/blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "8086汇编   在屏幕上显现动态菱形图案",
      "item": "https://sucicada.github.io/blog/posts/assmbly/8086%E6%B1%87%E7%BC%96-%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E6%98%BE%E7%8E%B0%E5%8A%A8%E6%80%81%E8%8F%B1%E5%BD%A2%E5%9B%BE%E6%A1%88/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "8086汇编   在屏幕上显现动态菱形图案",
  "name": "8086汇编   在屏幕上显现动态菱形图案",
  "description": " 在屏幕上显现动态菱形图案。\n* * * * * * * * * * *\t* * * * * * * * * * * * * * * * * * * * * * * * \u0026lt;图一\u0026gt; \u0026lt;图二\u0026gt; \u0026lt;图三\u0026gt; \u0026lt;图四\u0026gt; \u0026lt;图五\u0026gt; 思路示例：\n\u0026lt;1\u0026gt;编写程序p1:\n显示一个字符\n\u0026lt;2\u0026gt;把程序p1做成子程序，调用子程序编写程序p2:\n显示一个菱形\u0026lt;图三\u0026gt;\n\u0026lt;3\u0026gt;把p2做成一个子程序，调用子程序编写程序p3:\n循环显示出如图五种图形\n\u0026lt;4\u0026gt;修改程序p2,实现动态效果:\n添加清屏子程序和延时子程序,完成完整程序。\n注意点：\n要求以统一逻辑实现全部的五个图形。\n第三层的公式见代码\nassume cs:code code segment start: ; [ input: al: row ] ; [ ah: column ] mov cx,10 start_s: mov di,0 mov si,1 call p3 mov di,4 mov si,-1 call p3 loop start_s mov ax,4c00h int 21h p3: ; -- input: di (index of p2) si (1 or -1) push ax push bx push cx push dx push di ; mov cx,5 ; times ; cmp di,3 ; jne p3_di_not_4 ; p3_di_not_4: mov cx,4 ; times ; mov di,0 p3_s: push cx mov cx,di mov dl,\u0026#39;*\u0026#39; call p2 pop cx ; bx ax lay time mov ax,0 mov bx,1 push cx p3_layout: sub ax,1 sbb bx,0 mov cx,ax or cx,bx cmp cx,0 jne p3_layout pop cx push cx mov cx,di mov dl,\u0026#39; \u0026#39; call p2 pop cx add di,si loop p3_s pop di pop dx pop cx pop bx pop ax ret p2: push ax push bx push cx ; ----- [1] ----------- mov al,10 mov ah,10 mov bl,al mov bh,ah call p1 add bl,1 ; ----- [2] ----------- push cx cmp cx,0 je p2_2_cx_is_0 sub cx,1 p2_2_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [3] ----------- ; left:ah = bh-1-(1+1+(cl-2))*(cl-1)/2 ; = bh-1-cl*(cl-1)/2 = bh-segdis ; right: bh+1+cl*(cl-1)/2 = bh+segdis ; segdis = 1+cl*(cl-1)/2 push cx cmp cx,0 je p2_3_cx_is_0 mov al,cl ; cl sub cl,1 ; cl-1 mul cl ; cl*(cl-1) -\u0026gt; ax mov cl,2 ; 2 div cl ; cl*(cl-1)/2 -\u0026gt; al add al,1 ; cl*(cl-1)/2+1 mov cl,al ; segdis p2_3_cx_is_0: mov al,bl mov ah,bh sub ah,cl ; bh - segdis call p1 mov ah,bh add ah,cl ; bh + segdis call p1 pop cx add bl,1 ; ----- [4] ----------- push cx cmp cx,0 je p2_4_cx_is_0 sub cx,1 p2_4_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [5] ----------- mov al,bl mov ah,bh call p1 pop cx pop bx pop ax ret p1: ; ----- input: al: row ah: column dl:char push ax push bx push es mov bx,0b800h mov es,bx mov bl,ah mov bh,al mov al,160 mul bh add bl,bl mov bh,0 add ax,bx mov bx,ax mov byte ptr es:[bx],dl mov byte ptr es:[bx+1],2 pop es pop bx pop ax ret code ends end start ; -------*------- 7 ; -------*------- 7 7 ; -------*------- 7 7 ; -------*------- ; -------*------- ; -------*------- 7 ; -------*------- 7 7 ; ------*-*------ 6 8 ; -------*------- ; -------*------- ; 7-1-(1+1+(n-2))*(n-1)/2 ; 2 ; -------*------- 7 ; ------*-*------ 6 8 ; -----*---*----- 5 9 ; ------*-*------ ; -------*------- ; 3 ; -------*------- 7 ; -----*---*----- 5 9 ; ---*-------*--- 3 11 ; -----*---*----- ; -------*------- ; -------*------- 7 ; ----*-----*---- 4 10 ; *-------------* 0 14 ; ----*-----*---- ; -------*------- ",
  "keywords": [
    "assmbly"
  ],
  "articleBody": " 在屏幕上显现动态菱形图案。\n* * * * * * * * * * *\t* * * * * * * * * * * * * * * * * * * * * * * * \u003c图一\u003e \u003c图二\u003e \u003c图三\u003e \u003c图四\u003e \u003c图五\u003e 思路示例：\n\u003c1\u003e编写程序p1:\n显示一个字符\n\u003c2\u003e把程序p1做成子程序，调用子程序编写程序p2:\n显示一个菱形\u003c图三\u003e\n\u003c3\u003e把p2做成一个子程序，调用子程序编写程序p3:\n循环显示出如图五种图形\n\u003c4\u003e修改程序p2,实现动态效果:\n添加清屏子程序和延时子程序,完成完整程序。\n注意点：\n要求以统一逻辑实现全部的五个图形。\n第三层的公式见代码\nassume cs:code code segment start: ; [ input: al: row ] ; [ ah: column ] mov cx,10 start_s: mov di,0 mov si,1 call p3 mov di,4 mov si,-1 call p3 loop start_s mov ax,4c00h int 21h p3: ; -- input: di (index of p2) si (1 or -1) push ax push bx push cx push dx push di ; mov cx,5 ; times ; cmp di,3 ; jne p3_di_not_4 ; p3_di_not_4: mov cx,4 ; times ; mov di,0 p3_s: push cx mov cx,di mov dl,'*' call p2 pop cx ; bx ax lay time mov ax,0 mov bx,1 push cx p3_layout: sub ax,1 sbb bx,0 mov cx,ax or cx,bx cmp cx,0 jne p3_layout pop cx push cx mov cx,di mov dl,' ' call p2 pop cx add di,si loop p3_s pop di pop dx pop cx pop bx pop ax ret p2: push ax push bx push cx ; ----- [1] ----------- mov al,10 mov ah,10 mov bl,al mov bh,ah call p1 add bl,1 ; ----- [2] ----------- push cx cmp cx,0 je p2_2_cx_is_0 sub cx,1 p2_2_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [3] ----------- ; left:ah = bh-1-(1+1+(cl-2))*(cl-1)/2 ; = bh-1-cl*(cl-1)/2 = bh-segdis ; right: bh+1+cl*(cl-1)/2 = bh+segdis ; segdis = 1+cl*(cl-1)/2 push cx cmp cx,0 je p2_3_cx_is_0 mov al,cl ; cl sub cl,1 ; cl-1 mul cl ; cl*(cl-1) -\u003e ax mov cl,2 ; 2 div cl ; cl*(cl-1)/2 -\u003e al add al,1 ; cl*(cl-1)/2+1 mov cl,al ; segdis p2_3_cx_is_0: mov al,bl mov ah,bh sub ah,cl ; bh - segdis call p1 mov ah,bh add ah,cl ; bh + segdis call p1 pop cx add bl,1 ; ----- [4] ----------- push cx cmp cx,0 je p2_4_cx_is_0 sub cx,1 p2_4_cx_is_0: mov al,bl mov ah,bh sub ah,cl call p1 mov ah,bh add ah,cl call p1 pop cx add bl,1 ; ----- [5] ----------- mov al,bl mov ah,bh call p1 pop cx pop bx pop ax ret p1: ; ----- input: al: row ah: column dl:char push ax push bx push es mov bx,0b800h mov es,bx mov bl,ah mov bh,al mov al,160 mul bh add bl,bl mov bh,0 add ax,bx mov bx,ax mov byte ptr es:[bx],dl mov byte ptr es:[bx+1],2 pop es pop bx pop ax ret code ends end start ; -------*------- 7 ; -------*------- 7 7 ; -------*------- 7 7 ; -------*------- ; -------*------- ; -------*------- 7 ; -------*------- 7 7 ; ------*-*------ 6 8 ; -------*------- ; -------*------- ; 7-1-(1+1+(n-2))*(n-1)/2 ; 2 ; -------*------- 7 ; ------*-*------ 6 8 ; -----*---*----- 5 9 ; ------*-*------ ; -------*------- ; 3 ; -------*------- 7 ; -----*---*----- 5 9 ; ---*-------*--- 3 11 ; -----*---*----- ; -------*------- ; -------*------- 7 ; ----*-----*---- 4 10 ; *-------------* 0 14 ; ----*-----*---- ; -------*------- ",
  "wordCount" : "519",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "SuCicada"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sucicada.github.io/blog/posts/assmbly/8086%E6%B1%87%E7%BC%96-%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E6%98%BE%E7%8E%B0%E5%8A%A8%E6%80%81%E8%8F%B1%E5%BD%A2%E5%9B%BE%E6%A1%88/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SuCicada",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sucicada.github.io/blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sucicada.github.io/blog" accesskey="h" title="SuCicada (Alt + H)">SuCicada</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sucicada.github.io/blog/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://sucicada.github.io/blog/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sucicada.github.io/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://sucicada.github.io/blog/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">

    <h1 class="post-title">
      8086汇编   在屏幕上显现动态菱形图案
    </h1>
    <div class="post-meta">SuCicada&nbsp;|&nbsp;<a href="https://github.com/SuCicada/mysite-hugo/blob/master/content/posts/assmbly/8086%e6%b1%87%e7%bc%96%20%20%20%e5%9c%a8%e5%b1%8f%e5%b9%95%e4%b8%8a%e6%98%be%e7%8e%b0%e5%8a%a8%e6%80%81%e8%8f%b1%e5%bd%a2%e5%9b%be%e6%a1%88.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
    <ul class="post-tags">
      <li><a href="https://sucicada.github.io/blog/tags/assmbly/">assmbly</a></li>
    </ul>
  </header> 

  <div class="post-content"><blockquote>
<p>在屏幕上显现动态菱形图案。</p>
</blockquote>
<pre><code>*        *            *               *                    *
*        *           * *            *   *	        	*     *
*       * *         *   *         *       *         *             *   
*        *           * *            *   *               *     *
*        *            *               *                    *  
 &lt;图一&gt;    &lt;图二&gt;       &lt;图三&gt;         &lt;图四&gt;               &lt;图五&gt;
</code></pre>
<blockquote>
<p>思路示例：<br>
&lt;1&gt;编写程序p1:<br>
显示一个字符<br>
&lt;2&gt;把程序p1做成子程序，调用子程序编写程序p2:<br>
显示一个菱形&lt;图三&gt;<br>
&lt;3&gt;把p2做成一个子程序，调用子程序编写程序p3:<br>
循环显示出如图五种图形<br>
&lt;4&gt;修改程序p2,实现动态效果:<br>
添加清屏子程序和延时子程序,完成完整程序。<br>
注意点：<br>
要求以统一逻辑实现全部的五个图形。</p>
</blockquote>
<hr>
<p>第三层的公式见代码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">assume</span> <span class="nl">cs</span><span class="p">:</span><span class="n">code</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="n">segment</span>
</span></span><span class="line"><span class="cl"><span class="nl">start</span><span class="p">:</span>      
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="p">[</span> <span class="nl">input</span><span class="p">:</span>  <span class="nl">al</span><span class="p">:</span> <span class="n">row</span>    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="p">[</span>         <span class="nl">ah</span><span class="p">:</span> <span class="n">column</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="mi">10</span>
</span></span><span class="line"><span class="cl">    <span class="nl">start_s</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">di</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">si</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">call</span> <span class="n">p3</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">di</span><span class="p">,</span><span class="mi">4</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">si</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">call</span> <span class="n">p3</span>
</span></span><span class="line"><span class="cl">        <span class="n">loop</span> <span class="n">start_s</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ax</span><span class="p">,</span><span class="mi">4</span><span class="n">c00h</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="mi">21</span><span class="n">h</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">p3</span><span class="p">:</span>  <span class="p">;</span> <span class="o">--</span> <span class="nl">input</span><span class="p">:</span> <span class="nf">di</span> <span class="p">(</span><span class="n">index</span> <span class="n">of</span> <span class="n">p2</span><span class="p">)</span>  <span class="nf">si</span> <span class="p">(</span><span class="mi">1</span> <span class="n">or</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">dx</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">di</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="mi">5</span>       <span class="p">;</span> <span class="n">times</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="n">cmp</span> <span class="n">di</span><span class="p">,</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="n">jne</span> <span class="n">p3_di_not_4</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span>     <span class="nl">p3_di_not_4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="mi">4</span>       <span class="p">;</span> <span class="n">times</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="n">mov</span> <span class="n">di</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="nl">p3_s</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="n">di</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">dl</span><span class="p">,</span><span class="sc">&#39;*&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">call</span> <span class="n">p2</span>
</span></span><span class="line"><span class="cl">        <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="p">;</span> <span class="n">bx</span> <span class="n">ax</span> <span class="n">lay</span> <span class="n">time</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">ax</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">bx</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">        <span class="nl">p3_layout</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">sub</span> <span class="n">ax</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">            <span class="n">sbb</span> <span class="n">bx</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="n">ax</span>
</span></span><span class="line"><span class="cl">            <span class="n">or</span> <span class="n">cx</span><span class="p">,</span><span class="n">bx</span>
</span></span><span class="line"><span class="cl">            <span class="n">cmp</span> <span class="n">cx</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="n">jne</span> <span class="n">p3_layout</span>
</span></span><span class="line"><span class="cl">        <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">cx</span><span class="p">,</span><span class="n">di</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">dl</span><span class="p">,</span><span class="sc">&#39; &#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">call</span> <span class="n">p2</span>
</span></span><span class="line"><span class="cl">        <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">add</span> <span class="n">di</span><span class="p">,</span><span class="n">si</span>
</span></span><span class="line"><span class="cl">        <span class="n">loop</span> <span class="n">p3_s</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">di</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">dx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">p2</span><span class="p">:</span>         
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="o">-----</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-----------</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="mi">10</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="mi">10</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bl</span><span class="p">,</span><span class="n">al</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bh</span><span class="p">,</span><span class="n">ah</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">bl</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="o">-----</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-----------</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">cmp</span> <span class="n">cx</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">je</span> <span class="n">p2_2_cx_is_0</span>
</span></span><span class="line"><span class="cl">        <span class="n">sub</span> <span class="n">cx</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="nl">p2_2_cx_is_0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="n">bl</span>       
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>       
</span></span><span class="line"><span class="cl">    <span class="n">sub</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>       
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>       
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>    
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>    
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">bl</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="o">-----</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-----------</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="nl">left</span><span class="p">:</span><span class="n">ah</span> <span class="o">=</span> <span class="n">bh</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span>         <span class="o">=</span> <span class="n">bh</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>  <span class="o">=</span> <span class="n">bh</span><span class="o">-</span><span class="n">segdis</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="nl">right</span><span class="p">:</span> <span class="n">bh</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>     <span class="o">=</span> <span class="n">bh</span><span class="o">+</span><span class="n">segdis</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="n">segdis</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cmp</span> <span class="n">cx</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">je</span> <span class="n">p2_3_cx_is_0</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="n">cl</span>  <span class="p">;</span> <span class="n">cl</span> 
</span></span><span class="line"><span class="cl">        <span class="n">sub</span> <span class="n">cl</span><span class="p">,</span><span class="mi">1</span>   <span class="p">;</span> <span class="n">cl</span><span class="o">-</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">mul</span> <span class="n">cl</span>     <span class="p">;</span> <span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>     <span class="o">-&gt;</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">cl</span><span class="p">,</span><span class="mi">2</span>   <span class="p">;</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="n">div</span> <span class="n">cl</span>     <span class="p">;</span> <span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>   <span class="o">-&gt;</span> <span class="n">al</span>
</span></span><span class="line"><span class="cl">        <span class="n">add</span> <span class="n">al</span><span class="p">,</span><span class="mi">1</span>   <span class="p">;</span> <span class="n">cl</span><span class="o">*</span><span class="p">(</span><span class="n">cl</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">mov</span> <span class="n">cl</span><span class="p">,</span><span class="n">al</span>  <span class="p">;</span> <span class="n">segdis</span>
</span></span><span class="line"><span class="cl">    <span class="nl">p2_3_cx_is_0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="n">bl</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>
</span></span><span class="line"><span class="cl">    <span class="n">sub</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>  <span class="p">;</span> <span class="n">bh</span> <span class="o">-</span> <span class="n">segdis</span>
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>  <span class="p">;</span> <span class="n">bh</span> <span class="o">+</span> <span class="n">segdis</span>
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">bl</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="o">-----</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">-----------</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">cmp</span> <span class="n">cx</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">je</span> <span class="n">p2_4_cx_is_0</span>
</span></span><span class="line"><span class="cl">        <span class="n">sub</span> <span class="n">cx</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="nl">p2_4_cx_is_0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="n">bl</span>       
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>       
</span></span><span class="line"><span class="cl">    <span class="n">sub</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>       
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>       
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>    
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">ah</span><span class="p">,</span><span class="n">cl</span>    
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">bl</span><span class="p">,</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">;</span> <span class="o">-----</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-----------</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="n">bl</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">ah</span><span class="p">,</span><span class="n">bh</span>
</span></span><span class="line"><span class="cl">    <span class="n">call</span> <span class="n">p1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">cx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">p1</span><span class="p">:</span>     <span class="p">;</span> <span class="o">-----</span> <span class="nl">input</span><span class="p">:</span>  <span class="nl">al</span><span class="p">:</span> <span class="n">row</span>   <span class="nl">ah</span><span class="p">:</span> <span class="n">column</span>  <span class="nl">dl</span><span class="p">:</span><span class="kt">char</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">push</span> <span class="n">es</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bx</span><span class="p">,</span><span class="mi">0</span><span class="n">b800h</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">es</span><span class="p">,</span><span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bl</span><span class="p">,</span><span class="n">ah</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bh</span><span class="p">,</span><span class="n">al</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">al</span><span class="p">,</span><span class="mi">160</span>
</span></span><span class="line"><span class="cl">    <span class="n">mul</span> <span class="n">bh</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">bl</span><span class="p">,</span><span class="n">bl</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bh</span><span class="p">,</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span> <span class="n">ax</span><span class="p">,</span><span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">bx</span><span class="p">,</span><span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">byte</span> <span class="n">ptr</span> <span class="nl">es</span><span class="p">:[</span><span class="n">bx</span><span class="p">],</span><span class="n">dl</span>
</span></span><span class="line"><span class="cl">    <span class="n">mov</span> <span class="n">byte</span> <span class="n">ptr</span> <span class="nl">es</span><span class="p">:[</span><span class="n">bx</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">es</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">bx</span>
</span></span><span class="line"><span class="cl">    <span class="n">pop</span> <span class="n">ax</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="n">ends</span>
</span></span><span class="line"><span class="cl"><span class="n">end</span> <span class="n">start</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span>      
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span> 
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span> <span class="mi">7</span> 
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">------*-*------</span> <span class="mi">6</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> 
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> 
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="mi">7</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">------*-*------</span> <span class="mi">6</span> <span class="mi">8</span> 
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-----*---*-----</span> <span class="mi">5</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">------*-*------</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-----*---*-----</span> <span class="mi">5</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">---*-------*---</span> <span class="mi">3</span> <span class="mi">11</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-----*---*-----</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">----*-----*----</span> <span class="mi">4</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">*-------------*</span> <span class="mi">0</span> <span class="mi">14</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">----*-----*----</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="o">-------*-------</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://sucicada.github.io/blog/posts/soft/solve-error-install-g&#43;&#43;-in-ubuntu20.04-g&#43;&#43;-depends-g&#43;&#43;-7-7.4.0-1~/">
    <span class="title">« Prev</span>
    <br>
    <span>[Solve Error] Install g&#43;&#43; in Ubuntu20.04 :  g&#43;&#43; : Depends: g&#43;&#43;-7 (＞= 7.4.0-1~)</span>
  </a>
  <a class="next" href="https://sucicada.github.io/blog/posts/assmbly/8086%E6%B1%87%E7%BC%96%E5%9C%A8%E5%AE%89%E5%85%A8%E7%A9%BA%E9%97%B4%E7%94%BB%E9%87%91%E5%AD%97%E5%A1%94/">
    <span class="title">Next »</span>
    <br>
    <span>8086汇编：在安全空间画金字塔</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 8086汇编   在屏幕上显现动态菱形图案 on twitter"
        href="https://twitter.com/intent/tweet/?text=8086%e6%b1%87%e7%bc%96%20%20%20%e5%9c%a8%e5%b1%8f%e5%b9%95%e4%b8%8a%e6%98%be%e7%8e%b0%e5%8a%a8%e6%80%81%e8%8f%b1%e5%bd%a2%e5%9b%be%e6%a1%88&amp;url=https%3a%2f%2fsucicada.github.io%2fblog%2fposts%2fassmbly%2f8086%25E6%25B1%2587%25E7%25BC%2596-%25E5%259C%25A8%25E5%25B1%258F%25E5%25B9%2595%25E4%25B8%258A%25E6%2598%25BE%25E7%258E%25B0%25E5%258A%25A8%25E6%2580%2581%25E8%258F%25B1%25E5%25BD%25A2%25E5%259B%25BE%25E6%25A1%2588%2f&amp;hashtags=assmbly">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 8086汇编   在屏幕上显现动态菱形图案 on telegram"
        href="https://telegram.me/share/url?text=8086%e6%b1%87%e7%bc%96%20%20%20%e5%9c%a8%e5%b1%8f%e5%b9%95%e4%b8%8a%e6%98%be%e7%8e%b0%e5%8a%a8%e6%80%81%e8%8f%b1%e5%bd%a2%e5%9b%be%e6%a1%88&amp;url=https%3a%2f%2fsucicada.github.io%2fblog%2fposts%2fassmbly%2f8086%25E6%25B1%2587%25E7%25BC%2596-%25E5%259C%25A8%25E5%25B1%258F%25E5%25B9%2595%25E4%25B8%258A%25E6%2598%25BE%25E7%258E%25B0%25E5%258A%25A8%25E6%2580%2581%25E8%258F%25B1%25E5%25BD%25A2%25E5%259B%25BE%25E6%25A1%2588%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sucicada" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://sucicada.github.io/blog">SuCicada</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
